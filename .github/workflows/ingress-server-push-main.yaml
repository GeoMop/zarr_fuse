name: Ingress server - push main
on:
  workflow_dispatch:
  push:
    branches:
      - main
    paths:
      - app/databuk/ingress_server/**
jobs:
  build-and-deploy:
    uses: ./.github/workflows/ingress-server-reusable-workflow.yaml
    with:
      push-container: true
      deploy-helm-chart: true
      tag: generate
      namespace: ingress-server-latest
      release-name: ingress-server-latest
      s3-store-url: s3://app-databuk-test-service/bukov-main.zarr
      docker-repository: jbrezmorf/ingress-server-workflow-testing
    secrets: inherit
